<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GraphCrypt</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="bg"></div>

  <div class="container">

    <!-- HEADER -->
    <header class="header glass">
      <div class="brand">
        <div class="logoBox">GC</div>
        <div class="brandText">
          <h1>GraphCrypt</h1>
          <p>Graph-based Image Encryption & Decryption (MST + DFS)</p>
        </div>
      </div>
      <div class="headerTag">Secure Image Tool</div>
    </header>

    <!-- TABS -->
    <div class="tabs">
      <button class="tab active" id="encryptTab">Encrypt</button>
      <button class="tab" id="decryptTab">Decrypt</button>
    </div>

    <!-- ================= ENCRYPT ================= -->
    <section class="card glass" id="encryptSection">

      <div class="cardTop">
        <div>
          <h2>Encrypt Image</h2>
          <p class="hint">Upload an image, set password, then download encrypted output + key.json.</p>
        </div>
        <div class="pill">MST + DFS</div>
      </div>

      <div class="grid">
        <div class="field">
          <label>Upload Image</label>

          <div class="fileRow">
            <input type="file" id="encImage" accept="image/*" hidden />
            <button type="button" class="fileBtn" id="encPickBtn">Select Image</button>
            <span class="fileName" id="encFileName">No file chosen</span>
          </div>
        </div>

        <div class="field">
          <label>Password</label>
          <input type="password" id="encPassword" placeholder="Enter password" />
        </div>
      </div>

      <div class="previewGrid">
        <div class="previewCard">
          <div class="previewTitle">Original Image</div>
          <img id="encPreview" class="previewImg" src="" alt="Preview" />
          <div id="encPreviewEmpty" class="previewEmpty">No image selected</div>
        </div>

        <div class="previewCard">
          <div class="previewTitle">Encrypted Output</div>
          <img id="encOutPreview" class="previewImg" src="" alt="Encrypted Preview" />
          <div id="encOutPreviewEmpty" class="previewEmpty">Output will appear here</div>

          <!-- ✅ Download buttons inside without background box -->
          <div class="downloadMiniRow" id="encDownloadRow">
            <button class="miniBtn" id="downloadEncBtn" disabled>Download Image</button>
            <button class="miniBtn outline" id="downloadKeyBtn" disabled>Download key.json</button>
          </div>
        </div>
      </div>

      <button class="primary" id="encryptBtn">
        <span id="encBtnText">Encrypt</span>
        <span id="encLoader" class="loader hidden"></span>
      </button>

      <div class="result glassMini">
        <div class="resultHead">
          <h3>Status</h3>
          <span id="encMsg">Waiting...</span>
        </div>

        <div class="progressBar">
          <div class="progressFill" id="encProgress"></div>
        </div>
      </div>

      <div class="metrics">
        <div class="metricCard glassMini">
          <span>Entropy</span>
          <div id="mEntropy">--</div>
        </div>
        <div class="metricCard glassMini">
          <span>NPCR</span>
          <div id="mNPCR">--</div>
        </div>
        <div class="metricCard glassMini">
          <span>UACI</span>
          <div id="mUACI">--</div>
        </div>
      </div>

    </section>

    <!-- ================= DECRYPT ================= -->
    <section class="card glass hidden" id="decryptSection">

      <div class="cardTop">
        <div>
          <h2>Decrypt Image</h2>
          <p class="hint">Upload encrypted image + key.json and enter password.</p>
        </div>
        <div class="pill">Key + Password</div>
      </div>

      <div class="grid">
        <div class="field">
          <label>Encrypted Image</label>

          <div class="fileRow">
            <input type="file" id="decImage" accept="image/*" hidden />
            <button type="button" class="fileBtn" id="decPickBtn">Select Encrypted Image</button>
            <span class="fileName" id="decImageName">No file chosen</span>
          </div>
        </div>

        <div class="field">
          <label>Upload key.json</label>

          <div class="fileRow">
            <input type="file" id="decKey" accept=".json" hidden />
            <button type="button" class="fileBtn" id="decPickKeyBtn">Select key.json</button>
            <span class="fileName" id="decKeyName">No file chosen</span>
          </div>
        </div>

        <div class="field full">
          <label>Password</label>
          <input type="password" id="decPassword" placeholder="Enter password used during encryption" />
        </div>
      </div>

      <div class="previewGrid">
        <div class="previewCard">
          <div class="previewTitle">Encrypted Preview</div>
          <img id="decPreview" class="previewImg" src="" alt="Encrypted Preview" />
          <div id="decPreviewEmpty" class="previewEmpty">No image selected</div>
        </div>

        <div class="previewCard">
          <div class="previewTitle">Decrypted Output</div>
          <img id="decOutPreview" class="previewImg" src="" alt="Decrypted Preview" />
          <div id="decOutPreviewEmpty" class="previewEmpty">Output will appear here</div>

          <div class="downloadMiniRow single" id="decDownloadRow">
            <button class="miniBtn" id="downloadDecBtn" disabled>Download Image</button>
          </div>
        </div>
      </div>

      <button class="primary" id="decryptBtn">
        <span id="decBtnText">Decrypt</span>
        <span id="decLoader" class="loader hidden"></span>
      </button>

      <div class="result glassMini">
        <div class="resultHead">
          <h3>Status</h3>
          <span id="decMsg">Waiting...</span>
        </div>

        <div class="progressBar">
          <div class="progressFill" id="decProgress"></div>
        </div>
      </div>

    </section>

    <footer class="footer">
      GraphCrypt • Built by Swastika
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
